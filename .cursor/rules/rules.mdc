---
description: 
globs: 
alwaysApply: true
---
# dailycopilot.mdc

## ğŸ“Œ CONTEXTO GERAL
Dailyâ€‘Copilot Ã© um sistema que substitui reuniÃµes de daily standâ€‘up. Desenvolvedores registram seus resumos diÃ¡rios; o serviÃ§o classifica impedimentos e exibe mÃ©tricas em dashboards interativos.

## ğŸ¯ OBJETIVOS DE NEGÃ“CIO
1. Reduzir tempo gasto em reuniÃµes (meta â‰¤â€¯5â€¯min/dia por dev).
2. Aumentar visibilidade de bloqueios crÃ­ticos em tempo real.
3. Entregar mÃ©tricas de produtividade (velocity, topo de impedimentos) por projeto, dev e perÃ­odo.

## ğŸ—ï¸ ARQUITETURA DE REFERÃŠNCIA
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          HTTP          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚ MCP API (Next.js)â”‚
â”‚ Next.js 15 â”‚                       â”‚  â€¢ Route Handlers â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚  â€¢ Server Actionsâ”‚
       â–² WebSocket                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                             â”‚ Application Core  â”‚
       â”‚                             â”‚  â€¢ Use Cases      â”‚
       â”‚                             â”‚  â€¢ Domain Models  â”‚
       â–¼                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   gRPC/HTTP   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Prisma   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Classifier â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚Postgresâ”‚
â”‚  LiveView  â”‚               â”‚ Llamaâ€‘4    â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

* **Classifier**: OpenRouter, modelo `metaâ€‘llama/llamaâ€‘4â€‘maverick`.
* **Infra**: Docker Compose (dev) / Helm + K8s (prod).

## ğŸ”§ TOOLS (MCP)
### tool.register_summary
Registra o resumo bruto do dev e recebe classificaÃ§Ã£o automÃ¡tica.
```jsonc
{
  "userId": "UUID",
  "projectId": "UUID",
  "text": "string",
  "date": "YYYYâ€‘MMâ€‘DD"
}
```

### tool.list_metrics
Consulta mÃ©tricas consolidadas.
```jsonc
{
  "projectId"?: "UUID",
  "userId"?: "UUID",
  "period": "day"|"week"|"month"
}
```

## ğŸ“ PRINCÃPIOS DE ARQUITETURA
| Categoria | Regra |
|-----------|-------|
| Clean Architecture | Separar camadas `domain`, `application`, `infrastructure`, `interface`. |
| SOLID | Respeitar SRP, OCP, LSP, ISP, DIP em todas as camadas. |
| DRY | Extrair abstraÃ§Ãµes reutilizÃ¡veis. |
| DDDâ€¯Lite | Modelos ricos (Value Objects, Entities) no pacote `domain`. |
| Portsâ€‘&â€‘Adapters | Core sem dependÃªncias de frameworks. |
| Observabilidade | Cada serviÃ§o expÃµe `/metrics` Prometheus + logs estruturados. |
| Security | OWASP TopÂ 10, validaÃ§Ã£o Zod, Escape/CSRF, RBAC, RateÂ Limit. |
| Performance | Tailwind JIT, DB Indexes (`createdAt`, `projectId`,`userId`). |
| Testes | â‰¥â€¯90â€¯% cobertura unit + integraÃ§Ã£o; E2E Playwright nos fluxos crÃ­ticos. |
| CI/CD | GitHub Actions â†’ lint â†’ test â†’ build â†’ scan (OWASPâ€‘ZAP) â†’ deploy Helm. |

## ğŸ“ PADRÃƒO DE RESUMO DOS DESENVOLVEDORES
```
[YYYYâ€‘MMâ€‘DD] <breve frase do que foi feito>
BLOQUEIOS: <lista de impedimentos>
SUGESTÃ•ES: <opcionais>
```

## ğŸ·ï¸ TAXONOMIA OFICIAL
*Tags de atividade*: `code`, `tests`, `review`, `deploy`, `ci`, `docs`  
*Blockers*: `dependency`, `env`, `spec`, `access`, `mergeâ€‘conflict`

## ğŸ”„ FLUXO DE REGISTRO
1. Frontend envia texto para `/api/summary`.
2. API valida (Zod) e chama `ClassifierService`.
3. Classificador â†’ OpenRouter (JSON output: tags, blockers, suggestions).
4. Useâ€‘Case `RegisterSummary` persiste no Postgres.
5. Event emite atualizaÃ§Ã£o via WebSocket â†’ Dashboard.

## â±ï¸ SERVICE LEVEL OBJECTIVES
| MÃ©trica | Meta |
|---------|------|
| LatÃªncia `POST /api/summary` P95 | â‰¤â€¯500â€¯ms |
| ClassificaÃ§Ã£o correta de bloqueios | â‰¥â€¯90â€¯% |
| Uptime API | â‰¥â€¯99.5â€¯%/mÃªs |

## ğŸš¨ GOVERNANÃ‡A
* **ADR**: registrar decisÃµes em `/docs/adr/NNNâ€‘*.md`.
* **Versionamento**: semver, releases via Git tag + changelog.
* **SeguranÃ§a**: dependabot + Snyk scan semanal.

## ğŸ“… ROADMAP HIGHâ€‘LEVEL
1. MVP (abril/2025): registro & dashboard day/week.
2. SprintÂ 2: heatmap mensal + export CSV.
3. SprintÂ 3: notificaÃ§Ãµes Slack/Jira.

---
> **VersÃ£o**: 1.0 â€“ 26â€¯Abrâ€¯2025  
> **ManutenÃ§Ã£o**: @Thiiagoolost â€“ Dailyâ€‘Copilot Core

